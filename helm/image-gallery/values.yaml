#----------------------------------------------
# Naming
#----------------------------------------------
nameOverride: ""
fullnameOverride: ""

#----------------------------------------------
# Image
#----------------------------------------------
image:
  repository: 184890426414.dkr.ecr.us-east-1.amazonaws.com/image-gallery
  tag: latest
  pullPolicy: Always

#----------------------------------------------
# Replicas
#----------------------------------------------
replicaCount: 2

#----------------------------------------------
# Service Account (IRSA)
#----------------------------------------------
serviceAccount:
  create: true
  name: ""  # Empty = uses fullname (e.g., "image-gallery-sa")
  annotations:
    eks.amazonaws.com/role-arn: ""

#----------------------------------------------
# Service
#----------------------------------------------
service:
  type: ClusterIP
  port: 80
  targetPort: 8000

#----------------------------------------------
# Ingress (optional)
#----------------------------------------------
ingress:
  enabled: false
  className: alb
  annotations: {}
  hosts:
    - host: image-gallery.example.com
      paths:
        - path: /
          pathType: Prefix
  tls: []

#----------------------------------------------
# Application Config
#----------------------------------------------
config:
  awsRegion: us-east-1
  s3Bucket: image-gallery-dev-images
  logLevel: INFO
  logFormat: json
  maxUploadSize: "10485760"
  allowedExtensions: "jpg,jpeg,png,gif,webp"

#----------------------------------------------
# Resources
#----------------------------------------------
resources:
  requests:
    cpu: 100m
    memory: 128Mi
  limits:
    cpu: 500m
    memory: 512Mi

#----------------------------------------------
# Health Checks
#----------------------------------------------
livenessProbe:
  httpGet:
    path: /health
    port: http
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3

readinessProbe:
  httpGet:
    path: /health
    port: http
  initialDelaySeconds: 10
  periodSeconds: 5
  timeoutSeconds: 3
  failureThreshold: 3

#----------------------------------------------
# Autoscaling (optional)
#----------------------------------------------
autoscaling:
  enabled: false
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 80
  targetMemoryUtilizationPercentage: 80

#----------------------------------------------
# Pod Settings
#----------------------------------------------
podAnnotations:
  prometheus.io/scrape: "true"
  prometheus.io/port: "8000"
  prometheus.io/path: "/metrics"

podSecurityContext: {}

securityContext:
  runAsNonRoot: true
  runAsUser: 1000
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL

#----------------------------------------------
# Node Scheduling
#----------------------------------------------
nodeSelector: {}

tolerations: []

affinity: {}

#----------------------------------------------
# Prometheus Metrics
#----------------------------------------------
metrics:
  enabled: false
  port: http
  path: /metrics
  interval: 30s
  scrapeTimeout: 10s
  labels: {}
